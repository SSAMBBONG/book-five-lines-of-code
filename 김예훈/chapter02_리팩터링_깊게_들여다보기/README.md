> # Ch 02. 리팩터링 깊게 들여다보기

## 2.1 가독성 및 유지보수성 향상

코드가 하는 일을 변경하지 않으면서 더 나은 코드를 만드는 방법

### 코드 개선

#### 가독성

---

가독성은 <b>의도를 전달하기 위한 코드의 성질</b>이다. 즉 코드가 무슨 일을 하는지 파악하기 매우 쉽다는 뜻이다.

코딩 컨벤션 따르기, 주석 달기, 변수, 메서드, 클래스 및 파일 이름 지정, 공백 사용 등으로 코드의 의도를 전달할 수 있다.

의미 없는 주석, 이중 부정, 불명확한 변수 이름 등은 가독성을 해치므로 지양하도록 한다.

#### 유지보수성

---

유지보수성은 코드를 변경할 때 얼마나 많은 코드를 살펴봐야 하는가를 나타낸다.

살펴봐야 할 코드가 많을수록 시간이 더 오래 걸리고 실수할 가능성이 높아지므로, 유지보수성이 나쁜 코드는 개선해야 한다.

특히 <b>불변속성</b>을 조심해야 한다. 불변속성은 코드에서 조건을 명시적으로 확인하지 않고 테스트 시 assertion으로만 확인하는 속성이다.

유지보수성을 향상시키려면 불변속성들을 서로 가까운 곳에 위치시켜 쉽게 볼 수 있도록 해야 한다. 그래야 불변속성을 유지하기 쉬워진다. 이를 <b>불변속성의 범위제한</b>이라고 한다.

## 2.2 속도, 유연성 및 안정성 확보

코드의 품질에 가장 큰 영향을 미치는 것은 아키텍처 변경이다.

### 상속보다는 컴포지션 사용

컴포지션은 객체가 내부에 다른 객체의 참조를 가지는 것이다.

#### 유연성

---

컴포지션을 사용하면 더 깔끔하게 코드를 결합하고 재사용할 수 있다.

상속은 부모 클래스에 대한 의존성이 커지므로 유연성이 떨어진다.

하지만 무조건 컴포지션을 사용해야 하는 것은 아니다. 두 클래스가 완전히 is-a 관계일 경우에는 상속을 사용하는 것이 더 안정적일 수 있다.

### 수정이 아니라 추가(addition)로 코드를 변경

컴포지션의 가장 큰 장점은 기존 기능에 영향을 주지 않으면서 기능을 추가하거나 변경할 수 있다는 것이다. 이를 개방-폐쇄(open-closed) 원칙이라고도 한다.

#### 프로그래밍 속도

---

다른 코드를 변경하지 않고 기능을 추가, 변경할 수 있으므로 프로그래밍 속도가 향상한다.

이때 어떤 코드가 사용되고 어떤 코드가 사용되지 않는지를 파악해 사용하지 않는 코드는 최대한 빨리 삭제해야 코드베이스를 줄일 수 있다.

#### 안정성

---

기존 기능에 영향을 주지 않으면서 새 코드를 작성하기 때문에 새 코드가 실패해도 이전 기능으로 되돌아가기 쉽다.

## 2.3 리팩터링과 일상 업무

코드를 리팩터링하지 않고 그냥 전달하면 (자기 자신 포함한) 다른 프로그래머의 시간을 빼앗는 것이다.

또한 점점 소프트웨어 아키텍처에 부정적인 요인이 쌓이게 되는데, 이를 <b>기술 부채</b>라고 한다.

리팩터링은 배우는 데 시간이 걸리지만, 결국 익숙해지고 코드를 작성하고 생각하는 방식을 바꿀 수 있다.
