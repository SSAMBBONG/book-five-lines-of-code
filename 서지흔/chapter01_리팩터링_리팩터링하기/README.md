# 리팩토링 리팩토링하기

## 리팩토링이란 무엇인가?

- 리팩토링 : 기능을 변경하지 않고 코드의 가독성과 유지보수가 쉽도록 코드를 변경하는 것
- 리팩토링을 해야하는 이유
  - 코드를 더 빠르게 만들기 위해
  - 더 작은 코드를 만들기 위해
  - 코드를 더 일반적이거나 재사용가능하게 하기 위해
  - 코드의 가독성을 높이고 유지보수를 용이하게 하기 위해
    > 좋은 코드(Good Code) - 사람이 읽기 쉽고, 유지보수가 용이하며, 의도한대로 잘 동작하는 코드

리팩토링을 하게되면 프로그래머의 시간을 살 수 있다. 즉 경제적인 이점이 존재한다. 또한 유지보수가 용이해지며, 버그가 줄어든다. 또한 좋은 코드베이스는 읽고 이해하기 편하다.

## 무엇을 리팩토링할 것인가?

- 코드스멜 : 코드가 나쁘다는 것을 암시하는 것
  - 추상적이고 보는 감각을 키우는데 시간이 걸린다는 단점 존재
- 코드스멜을 인지하기 쉽지 않기 때문에 규칙을 제시하게 된다. 하지만 스멜과 규칙이 동일하지는 않는다.(스멜 /= 규칙)

### 코드 스멜의 예

![](https://velog.velcdn.com/images/bapdung/post/c76df753-a6a4-4b35-b515-3745bc280bc9/image.png)

- 함수는 한 가지 작업을 수행해야 한다.

## 리팩토링은 언제 할까?

- 6단계 작업 절차를 통해 프로그래밍 작업으로 문제를 해결함
  ![](https://velog.velcdn.com/images/bapdung/post/b4a3ce0b-50d3-422c-9dcd-75e419579f71/image.png)
- 탐색 -> 명세화 -> 구현 -> 테스트 -> **리팩토링** -> 전달
- 5단계(리팩토링)
  ![](https://velog.velcdn.com/images/bapdung/post/54f97c2f-2912-401e-8fa6-3c65d701c773/image.png)

### 레거시 시스템에서의 리팩토링

- 대규모 레거시 시스템에서 리팩토링을 할 때는 새로운 것을 구현할 때마다 새 코드를 쉽게 추가할 수 있도록 리팩토링을 먼저 한다.
- 요리를 시작하기 전에 필요한 재료를 준비하는 것과 유사하다고 볼 수 있다.

### 언제 리팩토링을 하지 말아야 할까?

- 한 번 실행하고 삭제할 코드, 이것은 익스트림 프로그래밍 커뮤니티에서 스파이크로 알려진 것임
- 폐기되기 전 유지보수 모드에 있는 코드
- 임베디드 시스템이나 게임의 고급 물리엔진과 같이 엄격한 성능 요구사항이 있는 코드
  > 그 밖의 모든 경우는 리팩토링에 투자하는 것이 좋다.

## 요약

> 리팩토링을 수행하려면 리팩토링 대상을 식별하는 스킬과 리팩토링 단계를 명시적으로 가진 문화, 리팩토링을 돕는 도구의 조합이 필요하다.
